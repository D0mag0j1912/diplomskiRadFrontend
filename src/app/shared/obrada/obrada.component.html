<div class="container">
    <div class="row">
        <!--Prikaziva se prozor sa pogreškom ako ima errora-->
        <app-alert *ngIf="response" [message]="responsePoruka" (close)="onClose()"></app-alert>
        <!--Prikaziva se prozor sa tablicom pacijenata-->
        <app-pretraga-pacijent *ngIf="isPretraga && !response" (close)="onCloseTablica()" (sljedeciPacijent)="onSljedeciPacijent()"></app-pretraga-pacijent>
        <div class="col-xs-12 col-md-10">
            <div class="table-responsive-sm">
                <table class="table table-bordered table-hover">
                    <tbody>
                        <tr>
                            <td>
                                <h4 style="font-family: Verdana, sans-serif">{{!isAktivan ? 'Nema aktivnih pacijenata' : 'Aktivni pacijent: ' + getImePrezime()}}</h4>
                            </td>
                            <td>
                                <h4 style="font-family: Verdana, sans-serif">{{isSljedeciPacijent ? 'Sljedeći pacijent: ' + sljedeciPacijent : porukaSljedeciPacijent}}</h4>
                            </td>
                            <td *ngIf="isAktivan"><button
                                    type="button"
                                    class="btn btn-primary"
                                    (click)="zavrsiPregled()"
                                    style="margin-top:5px;font-family: Verdana, sans-serif">Završi pregled</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12 col-md-6">
            <p
                style="font-family: Verdana, sans-serif"><strong>Dodaj u čekaonicu</strong></p>
            <form (ngSubmit)="onSubmit()" [formGroup]="forma" class="form-inline">
                <div class="form-group">
                    <input
                        type="text"
                        name="ime"
                        placeholder="Unesite ime..."
                        class="form-control"
                        style="width:200px;"
                        formControlName="ime">
                </div>
                <div class="form-group">
                    <input
                        type="text"
                        name="prezime"
                        placeholder="Unesite prezime..."
                        class="form-control"
                        style="width:200px;margin-left:7px;"
                        formControlName="prezime">
                </div>
                <div class="form-group">
                    <button
                            type="submit"
                            class="btn btn-info"
                            style="cursor: pointer;"
                            style="width:100px;height:34px;margin-left:7px;"
                            [disabled]="!forma.valid">Pretraži</button>
                </div>
                <span *ngIf="(forma.touched || forma.dirty) && !forma.valid">
                    <span
                        *ngIf="forma.hasError('error')"
                        style="font-weight: bold;"
                        class="help-block">Morate unijeti barem jedno od polja!</span>
                </span>
            </form>
        </div>
    </div>
    <br>
    <div
        class="row"
        *ngIf="isAktivan"
        style="margin-top:10px;">
        <div class="col-xs-12 col-md-12">
              <div class="table-responsive-sm">
                  <table class="table table-striped table-hover table-bordered">
                      <tbody>
                          <tr>
                              <td style="width:10%"><img src="../../assets/images/proba.jpg" width="120px" height="120px" class="img-responsive" style="margin-top: 5px;"></td>
                              <td style="width:40%">
                                  <h3
                                      style="font-family: Verdana, sans-serif;
                                      color:#337ab7;margin-top:-2px;">{{!isAktivan ? '' : getImePrezime()}}</h3>
                                  <h4 style="font-family: Verdana, sans-serif">{{!isAktivan ? '' :'Datum rođenja: ' + getDatRod()}}</h4>
                                  <h4 style="font-family: Verdana, sans-serif">{{!isAktivan ? '' :'Adresa: ' + getAdresa()}}</h4>
                                  <h4 style="font-family: Verdana, sans-serif">{{!isAktivan ? '' :'MBO: ' + getMBO()}}</h4>
                              </td>
                              <td style="width:50%">
                                  <br>
                                  <h4 style="font-family: Verdana, sans-serif">{{isNarucen ? 'Naručen u: ' + narucenU  + '!': porukaNarucen}}</h4>
                                  <h4 style="font-family: Verdana, sans-serif">
                                      {{isLijecnik ? isObradenOpciPodatci ? 'Medicinska sestra je obradila pacijenta u ' + vrijemeObradeMedSestra + '!'
                                      : 'Medicinska sestra nije obradila pacijenta!'
                                      : isObradenPovijestBolesti ? 'Liječnik je obradio pacijenta u ' + vrijemeObradeLijecnik + '!'
                                      : 'Liječnik nije obradio pacijenta!'}}</h4>
                                  <form [formGroup]="formaBMI" *ngIf="isMedSestra && formaBMI">
                                      <input
                                          type="text"
                                          class="form-control"
                                          placeholder="Visina (npr. 192)"
                                          formControlName="visina"
                                          style="width:150px;float:left;">
                                      <input
                                          type="text"
                                          class="form-control"
                                          placeholder="Težina (npr. 88)"
                                          formControlName="tezina"
                                          style="width:150px;float:left;margin-left:5px;">
                                      <input
                                          type="text"
                                          class="form-control"
                                          placeholder="BMI"
                                          formControlName="bmi"
                                          style="width:100px;left:5px;position: relative;">
                                      <span
                                          class="help-block"
                                          *ngIf="tezina.value">
                                          <span
                                              *ngIf="tezina.errors?.pattern">Težina mora biti cjelobrojni pozitivni broj!</span>
                                          <span
                                              *ngIf="!tezina.errors?.pattern
                                              && tezina.errors?.moraBitiPozitivanBroj">Težina mora biti cjelobrojni pozitivni broj!</span>
                                          <span
                                              *ngIf="!tezina.errors?.pattern
                                              && !tezina.errors?.moraBitiPozitivanBroj
                                              && tezina.errors?.neispravanUnos">Prevelika ili premala kilaža!</span>
                                      </span>
                                      <span
                                          class="help-block"
                                          *ngIf="visina.value">
                                          <span
                                              *ngIf="visina.errors?.pattern">Visina mora biti cjelobrojni pozitivni broj!</span>
                                          <span
                                              *ngIf="!visina.errors?.pattern
                                              && visina.errors?.moraBitiPozitivanBroj">Visina mora biti cjelobrojni pozitivni broj!</span>
                                          <span
                                              *ngIf="!visina.errors?.pattern
                                              && !visina.errors?.moraBitiPozitivanBroj
                                              && visina.errors?.neispravanUnos">Premala ili prevelika visina!</span>
                                      </span>
                                      <span
                                          class="help-block"
                                          *ngIf="spremioBMI"
                                          style="color:#42A948;">{{spremioBMI}}</span>
                                  </form>
                              </td>
                          </tr>
                      </tbody>
                  </table>
              </div>
        </div>
    </div>
    <app-sekundarni-header></app-sekundarni-header>
    <router-outlet></router-outlet>
</div>


