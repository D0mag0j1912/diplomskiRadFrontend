<div class="container">
    <div class="row">
        <!--Prikaziva se prozor sa pogreškom ako ima errora-->
        <app-alert *ngIf="response" [message]="responsePoruka" (close)="onClose()"></app-alert> 
        <!--Prikaziva se prozor sa tablicom pacijenata-->
        <app-pretraga-pacijent *ngIf="isPretraga && !response" (close)="onCloseTablica()" (sljedeciPacijent)="onSljedeciPacijent()"></app-pretraga-pacijent>
        <div class="col-xs-12 col-md-10">
            <div class="table-responsive-sm">
                <table class="table table-bordered table-hover">
                    <tbody>
                        <tr>
                            <td>
                                <h4 style="font-family: Verdana, sans-serif">{{!isAktivan ? 'Nema aktivnih pacijenata' : 'Aktivni pacijent: ' + getImePrezime()}}</h4>
                            </td>
                            <td>
                                <h4 style="font-family: Verdana, sans-serif">{{isSljedeciPacijent ? 'Sljedeći pacijent: ' + sljedeciPacijent : porukaSljedeciPacijent}}</h4>
                            </td>
                            <td *ngIf="isAktivan"><button 
                                    type="button" 
                                    class="btn btn-primary"
                                    (click)="zavrsiPregled()" 
                                    style="margin-top:5px;font-family: Verdana, sans-serif">Završi pregled</button></td>
                        </tr>
                    </tbody>   
                </table> 
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12 col-md-6">
            <form (ngSubmit)="onSubmit()" [formGroup]="forma">
                <div class="table-responsive-sm">
                    <table class="table">
                        <tbody>
                            <tr>
                                <td>
                                <p style="font-family: Verdana, sans-serif"><strong>Dodaj u čekaonicu</strong></p>
                                <input 
                                    type="text"
                                    name="ime"
                                    placeholder="Unesite ime..."
                                    class="form-control"
                                    style="width:200px;"
                                    formControlName="ime">
                                <span *ngIf="(forma.touched || forma.dirty) && !forma.valid">
                                    <span *ngIf="forma.hasError('error')">Morate unijeti barem jedno od polja!</span>
                                </span>
                                </td>
                                <td>
                                <input 
                                    type="text"
                                    name="prezime"
                                    placeholder="Unesite prezime..."
                                    class="form-control"
                                    style="width:200px;margin-top:29px;"
                                    formControlName="prezime">
                                </td>
                                <td>
                                <button 
                                    type="submit"
                                    class="btn btn-info"
                                    style="cursor: pointer;"
                                    style="width:100px;height:34px;margin-top:29px;"
                                    [disabled]="!forma.valid">Pretraži</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </form>
        </div>
    </div>
    <div class="row" *ngIf="isAktivan">
        <div class="col-xs-12 col-md-12">
            <div class="table-responsive-sm">
                <table class="table table-striped table-hover table-bordered">
                    <tbody>
                        <tr>
                            <td style="width:10%"><img src="../../assets/images/proba.jpg" width="120px" height="120px" class="img-responsive" style="margin-top: 5px;"></td>
                            <td style="width:40%">
                                <h3 
                                    style="font-family: Verdana, sans-serif;
                                    color:#337ab7;margin-top:-2px;">{{!isAktivan ? '' : getImePrezime()}}</h3> 
                                <h4 style="font-family: Verdana, sans-serif">{{!isAktivan ? '' :'Datum rođenja: ' + getDatRod()}}</h4> 
                                <h4 style="font-family: Verdana, sans-serif">{{!isAktivan ? '' :'Adresa: ' + getAdresa()}}</h4>
                                <h4 style="font-family: Verdana, sans-serif">{{!isAktivan ? '' :'MBO: ' + getMBO()}}</h4>
                            </td>
                            <td style="width:50%">
                                <h4 style="font-family: Verdana, sans-serif">{{isNarucen ? 'Naručen u: ' + narucenU : porukaNarucen}}</h4>
                                <h4 style="font-family: Verdana, sans-serif">
                                    {{isLijecnik ? isObradenOpciPodatci ? 'Medicinska sestra je obradila pacijenta u ' + vrijemeObradeMedSestra + '!' 
                                    : 'Medicinska sestra nije obradila pacijenta!' 
                                    : isObradenPovijestBolesti ? 'Liječnik je obradio pacijenta u ' + vrijemeObradeLijecnik + '!' 
                                    : 'Liječnik nije obradio pacijenta!'}}</h4>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <app-sekundarni-header></app-sekundarni-header>
    <router-outlet></router-outlet>
</div>


